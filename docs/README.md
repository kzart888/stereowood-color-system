# 叠雕画颜色管理系统

这是一个为工厂师傅设计的叠雕画颜色管理系统，用于管理和查阅多层激光切割木板的颜色配方和施工信息。

## 系统功能

### 1. 自配颜色管理
- 按色系分类管理自配颜色（蓝色系、黄色系、红色系、绿色系、紫色系）
- 每个自配颜色包含：色块图片、编号、配方、适用画层
- 支持修改和历史版本回溯
- 自动记录修改时间和历史数据

### 2. 作品配色管理
- 管理不同作品的多种配色方案
- 支持两种视图模式：层号优先视图 和 颜色优先视图
- 层号-颜色对应关系的直观展示
- 配色方案的修改和历史回溯功能

### 3. 蒙马特颜色库
- 管理基础颜料信息（朱红、桔黄、橘红等）
- 作为自配颜色的原料参考

## 技术架构

### 前端
- **Vue.js 3**: 现代化的前端框架
- **Element Plus**: 美观的UI组件库
- **Axios**: HTTP请求处理

### 后端
- **Node.js + Express**: 轻量级服务器
- **SQLite**: 文件数据库，无需额外安装
- **Multer**: 文件上传处理

## 快速开始

### 1. 环境要求
- Node.js (版本 >= 14.0.0)
- npm 或 yarn

### 2. 安装依赖
```bash
# 安装后端依赖
npm install
```

### 3. 初始化数据库
```bash
# 运行数据库初始化脚本，插入示例数据
node init-data.js
```

### 4. 启动后端服务器
```bash
# 启动服务器
npm start

# 或者使用开发模式（自动重启）
npm run dev
```

服务器将在 http://localhost:3000 启动

### 5. 访问前端界面
直接在浏览器中打开 `index.html` 文件，或者使用本地服务器：

```bash
# 如果你有 Python
python -m http.server 8080

# 如果你有 Node.js 的 http-server
npx http-server
```

然后访问 http://localhost:8080

## 项目结构

```
color-management-system/
├── server.js              # 后端服务器主文件
├── init-data.js           # 数据库初始化脚本
├── package.json           # 后端依赖配置
├── index.html             # 前端主页面
├── color_management.db    # SQLite数据库文件（运行后自动生成）
├── uploads/               # 上传的图片存储目录
└── README.md             # 项目说明文档
```

## 数据库设计

### 主要数据表
1. **color_categories** - 颜色分类表
2. **mont_marte_colors** - 蒙马特颜色表
3. **custom_colors** - 自配颜色表
4. **custom_colors_history** - 自配颜色历史表
5. **artworks** - 作品表
6. **color_schemes** - 配色方案表
7. **scheme_layers** - 层号-颜色对应表
8. **color_schemes_history** - 配色方案历史表

### 数据关系
- 自配颜色属于某个颜色分类
- 作品包含多个配色方案
- 配色方案包含多个层号-颜色对应关系
- 所有修改都有历史记录支持回溯

## API接口

### 颜色分类相关
- `GET /api/categories` - 获取所有颜色分类
- `POST /api/categories` - 添加新的颜色分类

### 自配颜色相关
- `GET /api/custom-colors` - 获取所有自配颜色
- `GET /api/custom-colors/:categoryId` - 根据分类获取自配颜色
- `POST /api/custom-colors` - 添加新的自配颜色
- `PUT /api/custom-colors/:id` - 更新自配颜色
- `GET /api/custom-colors/:id/history` - 获取历史记录

### 作品相关
- `GET /api/artworks` - 获取所有作品及配色方案
- `POST /api/artworks` - 添加新作品

### 蒙马特颜色相关
- `GET /api/mont-marte-colors` - 获取所有蒙马特颜色
- `POST /api/mont-marte-colors` - 添加蒙马特颜色

## 使用指南

### 添加新的自配颜色
1. 进入"自配颜色管理"页面
2. 选择对应的颜色分类
3. 点击"添加新的自配色"按钮
4. 填写颜色编号、配方、适用画层
5. 上传颜色样本图片
6. 保存

### 管理作品配色
1. 进入"作品配色管理"页面
2. 点击"添加新作品"创建作品
3. 在作品下点击"+ 配色方案"添加配色方案
4. 使用右上角的切换按钮改变视图模式
5. 修改和回溯功能帮助管理历史版本

### 管理基础颜料
1. 进入"蒙马特颜色库"页面
2. 查看所有可用的基础颜料
3. 添加新的颜料品种

## 注意事项

1. **图片上传**: 支持常见图片格式，建议大小不超过2MB
2. **数据备份**: 定期备份 `color_management.db` 数据库文件
3. **网络访问**: 确保前后端在同一网络环境中
4. **浏览器兼容**: 建议使用现代浏览器（Chrome、Firefox、Edge等）

## 未来扩展

系统预留了扩展接口，可以方便地添加以下功能：
- 配色方案的详细编辑界面
- 批量导入/导出功能
- 打印功能
- 用户权限管理
- 移动端适配

## 故障排除

### 常见问题

1. **无法连接到服务器**
   - 检查服务器是否已启动 (`npm start`)
   - 确认端口3000是否被占用

2. **图片无法显示**
   - 检查 `uploads/` 目录是否存在
   - 确认图片文件是否成功上传

3. **数据库错误**
   - 重新运行 `node init-data.js` 初始化数据库
   - 检查数据库文件权限

4. **页面样式异常**
   - 检查网络连接，确保能访问CDN资源
   - 清除浏览器缓存

## 联系支持

如有问题或需要技术支持，请联系系统管理员。

---

**版本**: 1.0.0  
**最后更新**: 2024年  
**开发者**: 您的团队