/**
 * 头部布局样式
 * 应用头部、导航栏、搜索框等布局
 * @module layout/header
 */

/* === 固定头部容器 === */
.app-header-sticky {
    position: sticky;
    top: 0;
    z-index: var(--sw-z-sticky);
    background: var(--sw-bg-white);
    border-bottom: 1px solid var(--sw-border-light);
    box-shadow: var(--sw-shadow-sm);
}

/* === 主头部布局 === */
.app-header-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 16px;
    height: 48px;
    gap: 16px;
}

/* Old responsive rule removed - see new responsive stages below */

/* === 左侧标题区域 === */
.app-header-left {
    display: flex;
    align-items: center;
    gap: 12px;
}

.app-title-badge {
    display: flex;
    align-items: center;
    gap: 8px;
}

.app-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--sw-text-primary);
    margin: 0;
    white-space: nowrap;
}

/* === 中间导航区域 === */
.app-header-center {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
}

/* Tab切换组 - 页面导航按钮容器 (布局样式) */
.tab-switch-group {
    display: inline-flex;
    gap: 6px;
    align-items: center;
}

/* Tab switch button styles moved to buttons.css for consistency */

/* === 搜索区域 === */
.app-header-search {
    position: relative;
    flex: 0 0 280px;
}

/* Standardize input height in header */
.app-header-search .el-input__wrapper {
    height: 30px !important;
    padding: 0 12px !important;
}

/* === Header Action Buttons === */
.app-header-right .el-button {
    height: 30px !important;
    padding: 0 8px !important;
    margin: 0 !important;
}

/* Ensure all header buttons have consistent height */
.app-header .el-button--small {
    height: 30px !important;
    line-height: 28px;
}

/* Fix all small buttons to be exactly 30px */
.el-button--small {
    height: 30px !important;
    min-height: 30px !important;
    line-height: 28px !important;
}

/* Specifically target the add button to be 30px */
.el-button--primary.el-button--small.add-button {
    height: 30px !important;
    min-height: 30px !important;
}

/* Search bar responsive sizing handled in stages below */

/* 全局搜索下拉 */
.global-search-dropdown {
    background: var(--sw-bg-white);
    border: 1px solid var(--sw-border-light);
    border-radius: var(--sw-radius-md);
    box-shadow: var(--sw-shadow-lg);
    margin-top: 4px;
    max-height: 400px;
    overflow-y: auto;
}

.global-search-dropdown.floating {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    z-index: var(--sw-z-dropdown);
}

.global-search-dropdown.edge-shift {
    right: auto;
    left: auto;
    transform: translateX(-50%);
}

/* 搜索结果分组 */
.gs-group {
    padding: 8px 0;
    border-bottom: 1px solid var(--sw-border-light);
}

.gs-group:last-child {
    border-bottom: none;
}

.gs-group-title {
    padding: 6px 12px;
    font-size: 12px;
    font-weight: 600;
    color: var(--sw-text-muted);
    text-transform: uppercase;
}

.gs-items {
    padding: 0;
}

.gs-item {
    padding: 8px 12px;
    cursor: pointer;
    transition: background var(--sw-transition-fast);
}

.gs-item:hover,
.gs-item.active {
    background: var(--sw-primary-light);
}

.gs-text {
    font-size: 14px;
    color: var(--sw-text-primary);
}

/* === 右侧工具区域 === */
.app-header-tools {
    display: flex;
    align-items: center;
    gap: var(--sw-actions-gap);
    flex-wrap: nowrap;
    min-width: 450px;
    justify-content: flex-end;
    margin-left: 0;
    padding-left: 0;
}

/* Remove any margin from first child */
.app-header-tools > *:first-child {
    margin-left: 0 !important;
}

/* 双按钮组 */
.dual-toggle-group {
    display: inline-flex;
    align-items: stretch;
    height: 30px;
    box-sizing: border-box;
    border: 1px solid var(--sw-border-base);
    border-radius: var(--sw-radius-sm);
    overflow: hidden;
    background: var(--sw-bg-white);
}

.dual-toggle-group button,
.dual-toggle-group .el-button {
    height: 100% !important;
    max-height: 28px !important;
    padding: 0 8px;
    margin: 0 !important;
    font-size: 13px;
    border: none !important;
    border-radius: 0 !important;
    box-shadow: none !important;
    background: transparent;
    transition: all var(--sw-transition-fast);
    line-height: 28px !important;
}

/* Specifically target the primary small buttons in dual-toggle */
.dual-toggle-group .el-button--primary.el-button--small {
    height: 28px !important;
    max-height: 28px !important;
    line-height: 26px !important;
}

.dual-toggle-group button:not(:last-child),
.dual-toggle-group .el-button:not(:last-child) {
    border-right: 1px solid var(--sw-border-light) !important;
}

.dual-toggle-group button:hover,
.dual-toggle-group .el-button:hover {
    background: var(--sw-bg-light);
    color: var(--sw-primary);
}

.dual-toggle-group button.is-active,
.dual-toggle-group .el-button.is-active {
    background: var(--sw-primary);
    color: white;
}

/* Add button styles moved to buttons.css for consistency */

@media (max-width: 768px) {
    .app-header-tools {
        width: 100%;
        justify-content: center;
    }
}

/* ========================================
   RESPONSIVE HEADER PROGRESSIVE TEXT STAGES
   ======================================== */

/* Stage 1: Full Display (>1400px) - Default */
/* All text versions visible by default */
.app-title-full { display: inline; }
.app-title-medium { display: none; }
.app-title-short { display: none; }
.text-full { display: inline; }
.text-medium { display: none; }

/* Icon margin styles moved to buttons.css for consolidation (2px) */

/* Stage 2: Medium Text (1200px-1400px) */
@media (max-width: 1400px) and (min-width: 1200px) {
    /* Title: Show medium version */
    .app-title-full { display: none; }
    .app-title-medium { display: inline; }
    .app-title-short { display: none; }
    
    /* Tab buttons: Use medium text */
    .tab-switch .text-full { display: none; }
    .tab-switch .text-medium { display: inline; }
    
    /* Tool buttons: Use medium text */
    .app-header-tools .text-full { display: none; }
    .app-header-tools .text-medium { display: inline; }
    
    /* Adjust search bar width */
    .app-header-search {
        flex: 0 0 240px;
    }
}

/* Stage 3: Minimal Text (900px-1200px) */
@media (max-width: 1199px) and (min-width: 900px) {
    /* Title: Show short version */
    .app-title-full { display: none; }
    .app-title-medium { display: none; }
    .app-title-short { display: inline; }
    
    /* Tab buttons: Use medium text */
    .tab-switch .text-full { display: none; }
    .tab-switch .text-medium { display: inline; }
    .tab-switch {
        padding: 5px 8px;  /* Keep 8px to match base style */
    }
    
    /* Tool buttons: Hide all text, icons only */
    .app-header-tools .text-full { display: none; }
    .app-header-tools .text-medium { display: none; }
    
    /* Add button special handling - always show text */
    .add-button .text-full { display: none; }
    .add-button .text-medium { display: inline; }
    
    /* Adjust button padding for icon-only */
    .app-header-tools .el-button:not(.add-button) {
        padding: 0 8px !important;
        min-width: 30px;
    }
    
    /* Dual toggle group buttons */
    .dual-toggle-group .el-button {
        padding: 0 8px !important;
    }
    
    /* Remove icon margin when no text */
    .app-header-tools .el-button:not(.add-button) .el-icon,
    .app-header-tools .el-button:not(.add-button) .btn-icon,
    .dual-toggle-group .el-icon,
    .dual-toggle-group .btn-icon {
        margin-right: 0;
    }
    
    /* Keep header in single row */
    .app-header-bar {
        flex-direction: row;
        height: 48px;
    }
    
    /* Search bar smaller */
    .app-header-search {
        flex: 0 0 200px;
    }
    
    /* Reduce gaps */
    .app-header-bar {
        gap: 12px;
        padding: 8px 12px;
    }
    
    .app-header-tools {
        gap: 6px;
        min-width: auto;
    }
}

/* Stage 4: Icon Only (768px-900px) */
@media (max-width: 899px) and (min-width: 768px) {
    /* Title: Show short version */
    .app-title-full { display: none; }
    .app-title-medium { display: none; }
    .app-title-short { display: inline; }
    .app-title {
        font-size: 16px;
    }
    
    /* Tab buttons: Icons only */
    .tab-switch .text-full { display: none; }
    .tab-switch .text-medium { display: none; }
    .tab-switch {
        padding: 5px;
    }
    .tab-switch .tab-icon,
    .tab-switch .el-icon {
        margin-right: 0;
    }
    
    /* Tool buttons: Icons only */
    .app-header-tools .text-full { display: none; }
    .app-header-tools .text-medium { display: none; }
    
    /* All buttons icon-only mode */
    .app-header-tools .el-button,
    .app-header-tools .add-button {
        padding: 0 8px !important;
        min-width: 30px;
    }
    
    /* Remove all icon margins in icon-only mode */
    .tab-icon,
    .btn-icon,
    .el-icon {
        margin-right: 0 !important;
    }
    
    /* Keep single row */
    .app-header-bar {
        flex-direction: row;
        height: 48px;
        padding: 8px;
        gap: 8px;
    }
    
    /* Very small search bar */
    .app-header-search {
        flex: 0 0 160px;
    }
    
    .app-header-search .el-input__wrapper {
        padding: 0 8px !important;
    }
    
    /* Compact tools area */
    .app-header-tools {
        gap: 4px;
        min-width: auto;
    }
    
    /* Smaller gaps in groups */
    .tab-switch-group {
        gap: 4px;
    }
    
    .dual-toggle-group .el-button {
        padding: 0 6px !important;
    }
}

/* Stage 5: Mobile Wrap (<768px) */
@media (max-width: 767px) {
    /* Allow wrapping to vertical layout */
    .app-header-bar {
        flex-direction: column;
        align-items: stretch;
        height: auto;
        padding: 8px;
        gap: 8px;
    }
    
    /* Top row: Title and search */
    .app-header-left {
        width: 100%;
    }
    
    .app-title-full { display: none; }
    .app-title-medium { display: none; }
    .app-title-short { display: inline; }
    .app-title {
        font-size: 16px;
    }
    
    /* Search bar full width */
    .app-header-search {
        flex: 1;
        width: 100%;
        order: 2;
    }
    
    /* Center navigation tabs */
    .app-header-center {
        order: 3;
        width: 100%;
        justify-content: center;
    }
    
    /* Tab buttons: Show medium text */
    .tab-switch {
        flex: 1;
        padding: 5px 8px;
    }
    .tab-switch .text-full { display: none; }
    .tab-switch .text-medium { display: inline; }
    .tab-switch .tab-icon,
    .tab-switch .el-icon {
        margin-right: 4px;  /* Restore margin in mobile where text is visible */
    }
    
    .tab-switch-group {
        width: 100%;
        justify-content: space-between;
    }
    
    /* Tool buttons at bottom */
    .app-header-tools {
        order: 4;
        width: 100%;
        justify-content: space-between;
        flex-wrap: wrap;
        gap: 6px;
        min-width: auto;
    }
    
    /* Tool buttons: Icons with minimal text */
    .app-header-tools .text-full { display: none; }
    .app-header-tools .text-medium { display: none; }
    
    /* Add button shows abbreviated text */
    .add-button .text-medium { display: inline; }
    /* el-icon margin already set globally to 2px in buttons.css */
    
    /* Dual toggle groups */
    .dual-toggle-group {
        flex: 0 0 auto;
    }
    
    .dual-toggle-group .el-button {
        padding: 0 6px !important;
    }
}