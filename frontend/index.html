<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>叠雕画颜色管理系统</title>
    
    <!-- 外部依赖库 -->
    <!-- Vue 3.3.4 - 核心框架 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.4/vue.global.min.js"></script>
    
    <!-- Element Plus 2.3.14 - UI组件库 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/element-plus/2.3.14/index.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/element-plus/2.3.14/index.full.min.js"></script>
    
    <!-- Element Plus Icons - 图标库 -->
    <script src="https://unpkg.com/@element-plus/icons-vue@2.1.0/dist/index.iife.min.js"></script>
    
    <!-- Axios 1.4.0 - HTTP请求库 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.min.js"></script>
    
    <!-- 项目样式文件 -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div id="app">
        <div class="main-container">
            <!-- 系统标题 -->
            <div class="system-header compact">
                <h1>STEREOWOOD-梯木叠雕-颜色管理系统</h1>
            </div>
            
            <!-- 主要导航标签页 -->
            <!-- activeTab: 在 app.js 中定义，控制当前激活的标签页 -->
            <div class="tabs-wrapper">
                <el-tabs v-model="activeTab" type="card">
                    <!-- Tab panes inside -->
                    <el-tab-pane label="自配颜色管理" name="custom-colors">
                        <custom-colors-component ref="customColorsRef"></custom-colors-component>
                    </el-tab-pane>
                    <el-tab-pane label="作品配色管理" name="artworks">
                        <artworks-component ref="artworksRef"></artworks-component>
                    </el-tab-pane>
                    <el-tab-pane label="颜色原料库" name="mont-marte">
                        <mont-marte-component ref="montMarteRef"></mont-marte-component>
                    </el-tab-pane>
                </el-tabs>
                <div class="floating-tab-tools">
                    <template v-if="activeTab==='artworks'">
                        <el-button size="small" type="primary" @click="$refs.artworksRef && $refs.artworksRef.addArtwork()">
                            <el-icon><Plus /></el-icon> 新作品
                        </el-button>
                        <el-button size="small" @click="$refs.artworksRef && $refs.artworksRef.toggleViewMode()" title="切换视图">
                            <!-- 使用 Operation 图标，兼容性更好；若需再改可替换 -->
                            <el-icon><Operation /></el-icon>
                            {{ ($refs.artworksRef && $refs.artworksRef.viewMode==='byColor') ? '自配色优先' : '层号优先' }}
                        </el-button>
                    </template>
                    <template v-else-if="activeTab==='custom-colors'">
                        <el-button size="small" type="primary" @click="$refs.customColorsRef && $refs.customColorsRef.openAddDialog()">
                            <el-icon><Plus /></el-icon> 新自配色
                        </el-button>
                    </template>
                    <template v-else-if="activeTab==='mont-marte'">
                        <el-button size="small" type="primary" @click="$refs.montMarteRef && $refs.montMarteRef.openDialog()">
                            <el-icon><Plus /></el-icon> 新原料
                        </el-button>
                    </template>
                </div>
            </div>
            
        </div>
    </div>

    <!-- JavaScript模块加载顺序很重要！ -->
    
    <!-- 工具函数库 -->
    <!-- 提供: helpers.formatDate(), helpers.generateColorCode(), helpers.compareNames() -->
    <script src="js/utils/helpers.js"></script>
    
    <!-- 验证函数库 -->
    <!-- 提供: validators.validateColorCode(), validators.validateColorName() -->
    <script src="js/utils/validators.js"></script>
    
    <!-- API封装库 -->
    <!-- 提供: api.categories, api.customColors, api.artworks, api.montMarteColors -->
    <script src="js/api/api.js"></script>
    
    <!-- Vue组件定义 - 必须在app.js之前加载 -->
    <!-- 配方编辑器组件 -->
    <script src="js/components/formula-editor.js"></script>
    <!-- 定义全局变量: CustomColorsComponent -->
    <script src="js/components/custom-colors.js"></script>
    
    <!-- 定义全局变量: ArtworksComponent -->
    <script src="js/components/artworks.js"></script>
    
    <!-- 定义全局变量: MontMarteComponent -->
    <script src="js/components/mont-marte.js"></script>
    
    <!-- 主应用入口 - 必须最后加载 -->
    <!-- 创建Vue应用实例，注册组件，挂载到#app -->
    <script src="js/app.js"></script>
</body>
</html>