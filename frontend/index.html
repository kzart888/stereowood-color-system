<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>叠雕画颜色管理系统</title>
    
    <!-- 外部依赖库 -->
    <!-- Vue 3.3.4 - 核心框架 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.3.4/vue.global.min.js"></script>
    
    <!-- Element Plus 2.3.14 - UI组件库 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/element-plus/2.3.14/index.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/element-plus/2.3.14/index.full.min.js"></script>
    
    <!-- Element Plus Icons - 图标库 -->
    <script src="https://unpkg.com/@element-plus/icons-vue@2.1.0/dist/index.iife.min.js"></script>
    
    <!-- Axios 1.4.0 - HTTP请求库 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.min.js"></script>
    
    <!-- 项目样式文件 -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
        <div id="app">
            <!-- 自定义粘性头部 -->
            <app-header-bar
                :active-tab="activeTab"
                :artworks-view-mode="artworksViewMode"
                :custom-colors-sort-mode="customColorsSortMode"
                :artworks-sort-mode="artworksSortMode"
                :mont-marte-sort-mode="montMarteSortMode"
                @update:activetab="val=>activeTab=val"
                @change-artworks-view-mode="setArtworksViewMode"
                @change-sort="setSortMode"
                @add-artwork="$refs.artworksRef && $refs.artworksRef.addArtwork && $refs.artworksRef.addArtwork()"
                @add-custom-color="$refs.customColorsRef && $refs.customColorsRef.addCustomColor && $refs.customColorsRef.addCustomColor()"
                @add-raw-material="$refs.montMarteRef && $refs.montMarteRef.addRawMaterial && $refs.montMarteRef.addRawMaterial()"
            ></app-header-bar>

            <!-- 全局搜索栏（仅作用于作品/方案） -->
            <!-- 回退阶段暂时移除搜索功能 UI -->
            <!-- <div class="global-search-bar">
                <el-input v-model.trim="searchQuery" placeholder="搜索作品编号/名称 或 方案名称" clearable size="large" prefix-icon="Search"></el-input>
            </div> -->

            <div class="main-container">
                <div v-show="activeTab==='custom-colors'">
                    <custom-colors-component ref="customColorsRef" :sort-mode="customColorsSortMode"></custom-colors-component>
                </div>
                <div v-show="activeTab==='artworks'">
                    <artworks-component ref="artworksRef" :sort-mode="artworksSortMode"></artworks-component>
                </div>
                <div v-show="activeTab==='mont-marte'">
                    <mont-marte-component ref="montMarteRef" :sort-mode="montMarteSortMode"></mont-marte-component>
                </div>
            </div>
        </div>

    <!-- JavaScript模块加载顺序很重要！ -->
    
    <!-- 工具函数库 -->
    <!-- 提供: helpers.formatDate(), helpers.generateColorCode(), helpers.compareNames() -->
    <script src="js/utils/helpers.js"></script>
    
    <!-- 验证函数库 -->
    <!-- 提供: validators.validateColorCode(), validators.validateColorName() -->
    <script src="js/utils/validators.js"></script>
    
    <!-- API封装库 -->
    <!-- 提供: api.categories, api.customColors, api.artworks, api.montMarteColors -->
    <script src="js/api/api.js"></script>
    
    <!-- Vue组件定义 - 必须在app.js之前加载 -->
    <!-- 头部组件 -->
    <script src="js/components/app-header-bar.js"></script>
    <!-- 配方编辑器组件 -->
    <script src="js/components/formula-editor.js"></script>
    <!-- 定义全局变量: CustomColorsComponent -->
    <script src="js/components/custom-colors.js"></script>
    
    <!-- 定义全局变量: ArtworksComponent -->
    <script src="js/components/artworks.js"></script>
    
    <!-- 定义全局变量: MontMarteComponent -->
    <script src="js/components/mont-marte.js"></script>
    <!-- 缩略图预览工具 -->
    <script src="js/utils/thumb-preview.js"></script>
    
    <!-- 主应用入口 - 必须最后加载 -->
    <!-- 创建Vue应用实例，注册组件，挂载到#app -->
    <script src="js/app.js"></script>
</body>
</html>